<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{user/layout/default}">
<th:block layout:fragment="customContents">
 
 <!-- ================ start banner area ================= -->
  <section class="page-banner-area" id="category">
    <div class="container h-100">
        <div class="text-center">
          <h1>무인기기 위치 조회</h1>
          <nav aria-label="breadcrumb" class="banner-breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/"><span class="fe fe-16 fe-home"></span></a></li>
              <li class="breadcrumb-item"><span class="fe fe-16 fe-chevron-right"></span></li>
              <li class="breadcrumb-item active" aria-current="page">무인기기 위치 조회</li>
            </ol>
          </nav>
      </div>
    </div>
  </section>
 
	  <!-- ================ end banner area ================= -->

  <!--================Point table Area =================-->
  <section class="order_details section-margin--small">
    <div class="container">
     <div id="map" style="width: 100%; height: 500px;"></div>
     <p>
    	<button onclick="panTo()">지도 중심좌표 부드럽게 이동시키기</button> 
    	<button onclick="zoomIn()">zoomIn</button>
    	<button onclick="zoomOut()">zoomOut</button>
    	<button onclick="resizeMap(),relayout()">지도 크기 바꾸기</button>
    	<span id="maplevel"></span>
	</p>
	<p><em>지도를 클릭해주세요!</em></p> 
	<div id="clickLatlng"></div>
	
      <p class="font"></p>
     
      <p class="billing-alert"></p>
      
      <a class="font" href="#"></a>
      
         
        
      
    </div>
  </section>
  <!--================End Order Details Area =================-->

   </th:block>
   	<th:block layout:fragment="customJs">
		<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=953410e0dbee17e1ca226c52f9ace76f"></script>
		<script type="text/javascript">
		//지도 설정
			const mapContainer = document.getElementById('map'),
			 mapOption = { 
		        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
		        level: 3 // 지도의 확대 레벨
		    };
		    
		//설정한 지도 생성
			const map = new kakao.maps.Map(mapContainer, mapOption);
	
		//마커 초기화(초기화 시 지도에 미리 지정 가능 : 카카오맵 API 문서 참조)
		 const marker = new kakao.maps.Marker(); 
	
		//카카오맵 클릭 이벤트 추가
		kakao.maps.event.addListener(map, 'click', (mouseEvent) => {
			//클릭한 위도, 경도 정보 불러오기
			let latlng = mouseEvent.latLng;
			//마커 위치를 클릭한 위치로 이동
			marker.setPosition(latlng);
			marker.setMap(map);
			
		   	let message = '클릭한 위치의 위도는 ' + latlng.getLat() + ' 이고, ';
		    message += '경도는 ' + latlng.getLng() + ' 입니다';
		    
		    let resultDiv = document.getElementById('clickLatlng'); 
		    resultDiv.innerHTML = message;
		    
		});
		
		//지정 중심으로 이동
		function panTo() {
		    // 이동할 위도 경도 위치를 생성합니다 
		    const moveLatLon = new kakao.maps.LatLng(33.450580, 126.574942);
		    
		    // 지도 중심을 부드럽게 이동시킵니다
		    // 만약 이동할 거리가 지도 화면보다 크면 부드러운 효과 없이 이동합니다
		    map.panTo(moveLatLon);            
		}       
		// 지도 레벨을 표시합니다
		displayLevel();
		 
		// 지도 레벨은 지도의 확대 수준을 의미합니다
		// 지도 레벨은 1부터 14레벨이 있으며 숫자가 작을수록 지도 확대 수준이 높습니다
		function zoomIn() {        
		    // 현재 지도의 레벨을 얻어옵니다
		    const level = map.getLevel();
		    
		    // 지도를 1레벨 내립니다 (지도가 확대됩니다)
		    map.setLevel(level - 1);
		    
		    // 지도 레벨을 표시합니다
		    displayLevel();
		}    

		function zoomOut() {    
		    // 현재 지도의 레벨을 얻어옵니다
		    const level = map.getLevel(); 
		    
		    // 지도를 1레벨 올립니다 (지도가 축소됩니다)
		    map.setLevel(level + 1);
		    
		    // 지도 레벨을 표시합니다
		    displayLevel(); 
		}    
		 
		function displayLevel(){
		    const levelEl = document.getElementById('maplevel');
		    levelEl.innerHTML = '현재 지도 레벨은 ' + map.getLevel() + ' 레벨 입니다.';
		}
		

		// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
		const mapTypeControl = new kakao.maps.MapTypeControl();

		// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
		// kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
		map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

		// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
		const zoomControl = new kakao.maps.ZoomControl();
		map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
		
		// 지도를 표시하는 div 크기를 변경하는 함수입니다
		function resizeMap() {
		    var mapContainer = document.getElementById('map');
		    mapContainer.style.width = '650px';
		    mapContainer.style.height = '650px'; 
		}

		function relayout() {    
		    
		    // 지도를 표시하는 div 크기를 변경한 이후 지도가 정상적으로 표출되지 않을 수도 있습니다
		    // 크기를 변경한 이후에는 반드시  map.relayout 함수를 호출해야 합니다 
		    // window의 resize 이벤트에 의한 크기변경은 map.relayout 함수가 자동으로 호출됩니다
		    map.relayout();
		}
		
		// 지도를 클릭한 위치에 표출할 마커입니다
		marker = new kakao.maps.Marker({ 
		    // 지도 중심좌표에 마커를 생성합니다 
		    position: map.getCenter() 
		}); 
		// 지도에 마커를 표시합니다
		marker.setMap(map);
		</script>
	</th:block>
</html>